/*!
 * ==========================================================
 *  COLOR PICKER PLUGIN 1.3.0
 * ==========================================================
 * Author: Taufik Nurrohman <https://github.com/tovic>
 * License: MIT
 * ----------------------------------------------------------
 */
!function(e,t){function u(e){return"undefined"!=typeof e}function s(e){return"string"==typeof e}function l(e,t,n){return t>e?t:e>n?n:e}function a(e,t){return parseInt(e,t||10)}function c(e){return Math.round(e)}function d(e){var i,o,f,u,s,l,a,d,t=+e[0],n=+e[1],r=+e[2];switch(u=Math.floor(6*t),s=6*t-u,l=r*(1-n),a=r*(1-s*n),d=r*(1-(1-s)*n),u=u||0,a=a||0,d=d||0,u%6){case 0:i=r,o=d,f=l;break;case 1:i=a,o=r,f=l;break;case 2:i=l,o=r,f=d;break;case 3:i=l,o=a,f=r;break;case 4:i=d,o=l,f=r;break;case 5:i=r,o=l,f=a}return[c(255*i),c(255*o),c(255*f)]}function p(e){return b(d(e))}function h(e){var u,t=+e[0],n=+e[1],r=+e[2],i=Math.max(t,n,r),o=Math.min(t,n,r),f=i-o,s=0===i?0:f/i,l=i/255;switch(i){case o:u=0;break;case t:u=n-r+f*(r>n?6:0),u/=6*f;break;case n:u=r-t+2*f,u/=6*f;break;case r:u=t-n+4*f,u/=6*f}return[u,s,l]}function b(e){var t=+e[2]|+e[1]<<8|+e[0]<<16;return t="000000"+t.toString(16),t.slice(-6)}function g(e){return h(m(e))}function m(e){return 3===e.length&&(e=e.replace(/./g,"$&$&")),[a(e[0]+e[1],16),a(e[2]+e[3],16),a(e[4]+e[5],16)]}function v(e){return[+e[0]/360,+e[1]/100,+e[2]/100]}function y(e){return[c(360*+e[0]),c(100*+e[1]),c(100*+e[2])]}function w(e){return[+e[0]/255,+e[1]/255,+e[2]/255]}function k(e){if("object"==typeof e)return e;var t=/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i.exec(e),n=/\s*hsv\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/i.exec(e),r="#"===e[0]&&e.match(/^#([\da-f]{3}|[\da-f]{6})$/);return r?g(e.slice(1)):n?v([+n[1],+n[2],+n[3]]):t?h([+t[1],+t[2],+t[3]]):[0,1,1]}var n="__instance__",r="firstChild",i="scrollLeft",o="scrollTop",f=setTimeout;!function(e){e.version="1.3.0",e[n]={},e.each=function(t,r){return f(function(){var i,r=e[n];for(i in r)t(r[i],i,r)},0===r?0:r||1),e},e.parse=k,e._HSV2RGB=d,e._HSV2HEX=p,e._RGB2HSV=h,e._HEX2HSV=g,e._HEX2RGB=function(e){return w(m(e))},e.HSV2RGB=function(e){return d(v(e))},e.HSV2HEX=function(e){return p(v(e))},e.RGB2HSV=function(e){return y(h(e))},e.RGB2HEX=b,e.HEX2HSV=function(e){return y(g(e))},e.HEX2RGB=m}(e.CP=function(a,c){function x(e,t,n){e=e.split(/\s+/);for(var r=0,i=e.length;i>r;++r)t.addEventListener(e[r],n,!1)}function E(e,t,n){e=e.split(/\s+/);for(var r=0,i=e.length;i>r;++r)t.removeEventListener(e[r],n)}function $(e,t){for(var n=t.touches?t.touches[0].pageX:t.pageX,r=t.touches?t.touches[0].pageY:t.pageY,i=T(e).l,o=T(e).t;e=e.offsetParent;)i+=T(e).l,o+=T(e).t;return{x:n-i,y:r-o}}function T(e){return{l:e.offsetLeft,t:e.offsetTop}}function A(e,t){for(;(e=e.parentElement)&&e!==t;);return e}function L(e){e&&e.preventDefault()}function O(e){return{w:e.offsetWidth,h:e.offsetHeight}}function I(e){return b||(u(e)?e:!1)}function R(e){b=e}function C(e,t,n){return u(e)?u(t)?(u(g[e])||(g[e]={}),u(n)||(n=Object.keys(g[e]).length),g[e][n]=t,h):g[e]:g}function S(e,t){return u(e)?u(t)?(delete g[e][t],h):(g[e]={},h):(g={},h)}function N(e,t,n){if(!u(g[e]))return h;if(u(n))u(g[e][n])&&g[e][n].apply(h,t);else for(var r in g[e])g[e][r].apply(h,t);return h}function J(e,t){e&&"h"!==e||N("change:h",t),e&&"sv"!==e||N("change:sv",t),N("change",t)}function ee(){return m.parentNode}function te(){var t=O(F).w,n=e.innerHeight,r=Math.max(H[i],F[i]),f=Math.max(H[o],F[o]),u=t+r,s=n+f;return j=T(a).l,K=T(a).t+O(a).h,j+q>u&&(j=u-q),K+X>s&&(K=s-X),m.style.left=j+"px",m.style.top=K+"px",N("fit",[h]),h}function ne(n,r){function g(e){var t=e.target,n=t===a||A(t,a)===a;n?ne():Q(),N(n?"enter":"exit",[h])}function T(e){var n=(d(M),d([M[0],1,1]));D.style.backgroundColor="rgb("+n.join(",")+")",R(M),L(e)}function C(e){var t=l($(z,e).y,0,i);M[0]=(i-t)/i,B.style.top=t-u/2+"px",T(e)}function S(e){var t=$(D,e),n=l(t.x,0,o),r=l(t.y,0,f);M[1]=1-(o-n)/o,M[2]=(f-r)/f,G.style.right=o-n-s/2+"px",G.style.top=r-b/2+"px",T(e)}function F(e){Y&&(C(e),V=p(M),U||(N("drag:h",[V,h]),N("drag",[V,h]),J("h",[V,h]))),W&&(S(e),V=p(M),P||(N("drag:sv",[V,h]),N("drag",[V,h]),J("sv",[V,h]))),U=!1,P=!1}function _(e){var t=e.target,n=Y?"h":"sv",r=[p(M),h],i=t===a||A(t,a)===a,o=t===m||A(t,m)===m;i||o?o&&(N("stop:"+n,r),N("stop",r),J(n,r)):ee()&&c!==!1&&(Q(),N("exit",[h]),J(0,r)),Y=!1,W=!1}function j(e){U=!0,Y=!0,F(e),L(e),N("start:h",[V,h]),N("start",[V,h]),J("h",[V,h])}function K(e){P=!0,W=!0,F(e),L(e),N("start:sv",[V,h]),N("start",[V,h]),J("sv",[V,h])}n||((r||H).appendChild(m),h.visible=!0),q=O(m).w,X=O(m).h;var i=O(z).h,o=O(D).w,f=O(D).h,u=O(B).h,s=O(G).w,b=O(G).h;n?(m.style.left=m.style.top="-9999px",c!==!1&&x(c,a,g),h.create=function(){return ne(1),N("create",[h]),h},h.destroy=function(){return c!==!1&&E(c,a,g),Q(),R(!1),N("destroy",[h]),h}):te(),Z=function(){M=I(M),T(),B.style.top=i-u/2-i*+M[0]+"px",G.style.right=o-s/2-o*+M[1]+"px",G.style.top=f-b/2-f*+M[2]+"px"},Q=function(n){return ee()&&(ee().removeChild(m),h.visible=!1),E(v,z,j),E(v,D,K),E(y,t,F),E(w,t,_),E(k,e,te),h},Z(),n||(x(v,z,j),x(v,D,K),x(y,t,F),x(w,t,_),x(k,e,te))}var h=this,b=!1,g={},m=t.createElement("div"),v="touchstart mousedown",y="touchmove mousemove",w="touchend mouseup",k="orientationchange resize";if(!(h instanceof CP))return new CP(a,c);CP[n][a.id||a.name||Object.keys(CP[n]).length]=h,u(c)||(c=v),R(CP.parse(a.getAttribute("data-color")||a.value||[0,1,1])),m.className="color-picker",m.innerHTML='<div class="color-picker-control"><span class="color-picker-h"><i></i></span><span class="color-picker-sv"><i></i></span></div>';var Z,Q,H=t.body,F=t.documentElement,_=m[r].children,M=I([0,1,1]),z=_[0],D=_[1],B=z[r],G=D[r],U=!1,P=!1,Y=!1,W=!1,j=0,K=0,q=0,X=0,V=p(M);return ne(1),f(function(){var e=[p(M),h];N("create",e),J(0,e)},0),h.target=a,h.picker=m,h.visible=!1,h.on=C,h.off=S,h.trigger=N,h.fit=te,h.set=function(e){return u(e)?(s(e)&&(e=CP.parse(e)),R(e),Z(),h):I()},h.hooks=g,h.enter=function(e){return ne(0,e)},h.exit=Q,h})}(window,document);